
const songlist=[
    /*here starts the manithan*/
    {
        id:0,
        path:"Kondattam.mp3",
        image:"mani.jpg",
        artist:"santhoshnarayanan",
        name:"Kondattam"
    },
    
    {
        id:1,
        path:"Mun-Sellada.mp3",
        image:"mani.jpg",
        artist:"santhoshnarayanan",
        name:"Mun-Sellada"
    },
    
    {
        id:2,
        path:"Poi-Vazhva.mp3",
        image:"mani.jpg",
        artist:"santhoshnarayanan",
        name:"Poi-Vazhva"
    },
    {
        id:3,
        path:"Aval.mp3",
        image:"mani.jpg",
        artist:"santhoshnarayanan",
        name:"Aval"
    },
    {
        id:4,
        path:"Adho-Manithan-Theme.mp3",
        image:"mani.jpg",
        artist:"santhoshnarayanan",
        name:"Adho-Manithan"
    },
    
    //vaaranam aayiram
    {
        id:5,
        path:"Adiyae-Kolluthey-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Adiyae-Kolluthey"
    },
    {
        id:6,
        path:"Annul-Maelae-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Annul-Maelae"
    },
    {
        id:7,
        path:"Ava-Enna-Enna-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Ava-Enna-Enna"
    },
    {
        id:8,
        path:"Mundhinam-Parthene-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Mundhinam-Parthene"
    },
    {
        id:9,
        path:"Nenjukkul-Peidhidum-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Nenjukkul-Peidhidum"
    },
    {
        id:10,
        path:"Oh-Shanthi-Shanthi-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Oh-Shanthi-Shanthi"
    },
    {
        id:11,
        path:"Ragasiyam-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Ragasiyam"
    },
    {
        id:12,
        path:"Yethi-Yethi-MassTamilan.com.mp3",
        image:"va.jpg",
        artist:"Harris Jayaraj",
        name:"Yethi-Yethi"
    },
    
    //7 aum arivu
    {
        id:13,
        path:"Innum-Enna-Thozha.mp3",
        image:"7.jpg",
        artist:"Harris Jayaraj",
        name:"Innum-Enna-Thozha"
    },
    {
        id:14,
        path:"Mun-Andhi.mp3",
        image:"7.jpg",
        artist:"Harris Jayaraj",
        name:"Mun-Andhi.mp3"
    },
    {
        id:15,
        path:"Oh-Ringa-Ringa.mp3",
        image:"7.jpg",
        artist:"Harris Jayaraj",
        name:"Oh-Ringa-Ringa"
    },
    {
        id:16,
        path:"The-Rise-of-Damo.mp3",
        image:"7.jpg",
        artist:"Harris Jayaraj",
        name:"The-Rise-of-Damo"
    },
    {
        id:17,
        path:"Yamma-Yamma.mp3",
        image:"7.jpg",
        artist:"Harris Jayaraj",
        name:"Yamma-Yamma"
    },
    {
        id:18,
        path:"Yellae-Lama.mp3",
        image:"7.jpg",
        artist:"Harris Jayaraj",
        name:"Yellae-Lama"
    },
    
    //aadukalam
    {
        id:19,
        path:"A-Love-Blossoms-Instrumental.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"A-Love-Blossoms-Instrumental"
    },
    {
        id:20,
        path:"Ayyayo-Nenju.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Ayyayo-Nenju"
    },
    {
        id:21,
        path:"En-Vennilave.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"En-Vennilave"
    },
    {
        id:22,
        path:"Otha-Sollaala.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Otha-Sollaala"
    },
    {
        id:23,
        path:"Porkkalam-Tamil-Rap.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Porkkalam-Tamil-Rap"
    },{
        id:24,
        path:"Warriors-English-Rap.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Warriors-English-Rap"
    },
    {
        id:25,
        path:"Yathe-Yathe.mp3",
        image:"aadu.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Yathe-Yathe"
    },
    
    //AO
    {
        id:26,
        path:"Atho-Antha-Paravai-Remix.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Atho-Antha-Paravai-Remix"
    },
    {
        id:27,
        path:"Celebration-of-Life.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Celebration-of-Life"
    },
    {
        id:28,
        path:"Indha-Paadhai.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Indha-Paadhai"
    },
    {
        id:29,
        path:"Maalai-Neram.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Maalai-Neram"
    },
    {
        id:30,
        path:"Oh-Eesa.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Oh-Eesa"
    },
    {
        id:31,
        path:"Oh-Eesa-mix.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Oh-Eesa-mix"
    },
    {
        id:32,
        path:"Pemmanae.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Pemmanae"
    },
    {
        id:33,
        path:"Thaai-Thindra-Mannae.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Thaai-Thindra-Mannae"
    },
    {
        id:34,
        path:"Thaai-Thindra-Manne.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Thaai-Thindra-Manne"
    },
    {
        id:35,
        path:"The-King-Arrives.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"The-King-Arrives"
    },
    {
        id:36,
        path:"Un-Mela-Aasadhaan.mp3",
        image:"ao.jpg",
        artist:"G.V.Prakash Kumar",
        name:"Un-Mela-Aasadhaan"
    },
    //endrendrum punnagai
    {
        id:37,
        path:"Enai-Saaithaalae.mp3",
        image:"ep.jpg",
        artist:"Harris Jayaraj",
        name:"Enai-Saaithaalae"
    },
    {
        id:38,
        path:"Yaelae-Yealae-Dhosthu-Da.mp3",
        image:"ep.jpg",
        artist:"Harris Jayaraj",
        name:"Yaelae-Yealae-Dhosthu-Da"
    },
    {
        id:39,
        path:"Vaan-Engum-Nee-Minna.mp3",
        image:"ep.jpg",
        artist:"Harris Jayaraj",
        name:"Vaan-Engum-Nee-Minna"
    },
    {
        id:40,
        path:"Othayilae.mp3",
        image:"ep.jpg",
        artist:"Harris Jayaraj",
        name:"Othayilae"
    },
    {
        id:41,
        path:"Kadal-Naan-Thaan.mp3",
        image:"ep.jpg",
        artist:"Harris Jayaraj",
        name:"Kadal-Naan-Thaan"
    },
    {
        id:42,
        path:"Ennatha-Solla.mp3",
        image:"ep.jpg",
        artist:"Harris Jayaraj",
        name:"Ennatha-Solla"
    },
    //geetha govintham
    {
        id:43,
        path:"Inkem-Inkem-Inkem-Kaavaale-MassTamilan.com.mp3",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"Inkem-Inkem-Inkem-Kaavaale"
    },
    {
        id:44,
        path:"Kanureppala-Kaalam",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"Kanureppala-Kaalam"
    },
    {
        id:45,
        path:"Tanemandhe-Tanemandhe",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"Tanemandhe-Tanemandhe"
    },
    {
        id:46,
        path:"Vachindamma-Vachindamma-MassTamilan.com.mp3",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"Vachindamma-Vachindamma"
    },
    {
        id:47,
        path:"What-The-F-MassTamilan.com.mp3",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"What-The-F"
    },
    {
        id:48,
        path:"What-The-Life-MassTamilan.com.mp3",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"What-The-Life"
    },
    {
        id:49,
        path:"Yenti-Yenti-MassTamilan.com.mp3",
        image:"gg.jpg",
        artist:"Gopi Sundar",
        name:"Yenti-Yenti"
    },
    
];
/*
let mysongs=document.getElementById("mysongs");
for(let i=0;i<songlist.length;i++){
let div1=document.createElement("div");
let pic=document.createElement("img");
let div2=document.createElement("div");
let h5=document.createElement("h5");
let p1=document.createElement("p");
let p2=document.createElement("p");
let p3=document.createElement("p");
let p4=document.createElement("p");
let i1=document.createElement("i");
let i2=document.createElement("i");
let i3=document.createElement("i");
let i4=document.createElement("i");
div1.className="box";
div2.className="img";
pic.src=songlist[i].image;
p1.addEventListener("click",playmysong(i));
console.log(p1)
i1.className=
i.className=
i.className=
i.className=
i1.addEventListener("click",function (){
    playmysong()
})
h5.innerHTML=songlist[i].name;
div2.appendChild(pic);
mysongs.append(div1);
div1.appendChild(div2);
div1.appendChild(h5);
div1.appendChild(p1);
div1.appendChild(p2);
div1.appendChild(p3);
div1.appendChild(p4);
console.log("iiiiii");
console.log(mysongs);
console.log(p1);
}*/
let length=[];

for(let i=0;i<songlist.length;i++){
    length[i]=i;
}
localStorage.setItem("length", JSON.stringify(length));
console.log(localStorage.getItem("length"));
console.log(length);
/*creation of the audio tag and loading particular music by touching the image on the screen*/
let song_index=0;
let myplaylist=[];
let myqueue=[];
let i=0;
let k=0;
let likes=[];
let l=0;
let updateTimer;

//accessing the bottom player.......
let pimage=document.getElementById("pimage");
console.log(pimage);
let pname=document.getElementById("pname");
console.log(pname);
let plike=document.getElementById("plike");
console.log(plike);
let mimage=document.getElementById("mimage");
console.log(mimage);
let msong=document.getElementById("msong");
console.log(msong);
let artname=document.getElementById("artistname");
console.log(artname);
let recents=document.getElementById("recents");
console.log(recents);

let curtime=document.getElementById("curtime");
console.log(curtime);
let duration=document.getElementById("duration");
console.log(duration);

let seek_slider=document.getElementById("progress");
console.log(seek_slider);
let back=document.getElementById("back");
let next=document.getElementById("next");
let play=document.getElementById("play");

let isPlaying=false;

let audio=document.createElement("AUDIO");

function playmysong(s_index){
   song_index=s_index;
    //loading a new track by the songindex:
    audio.src=songlist[s_index].path;
    /*if pause then change icon and play and viceversa.*/

/*one*/
audio.onloadeddata=function(){
    progress.max=audio.duration;
    progress.value=audio.currentTime; 
 }/*set ranger and audio ranger is equal*/
 
 
 /*to work ranger as the audio ranger*/
 if(audio.play()){
    setInterval(()=>{
        progress.value=audio.currentTime;
    },500)
 }/*to upadate the range */
 
 /*if we need to make the change in range it need to work*/
 progress.onchange=function(){
    audio.play();
    audio.currentTime=progress.value;
    play.classList.add("fa-pause");
    play.classList.remove("fa-play");}
    audio.load();
    isPlaying=false;
    pausePlay();         
    audio.play();            //audio.controls=true;
                                      // document.body.appendChild(audio);
//UPDATE THE CONTENTS IN THE CORRESPOSING AREA:
/*bottom player*/
pimage.src=songlist[s_index].image;
pname.innerHTML=songlist[s_index].name;
/*main palyer*/
mimage.src=songlist[s_index].image;
msong.innerHTML=songlist[s_index].name;
artname.innerHTML=songlist[s_index].artist;
/*recents*/
let div=document.createElement("div");
div.className="rsongs";
let imgd=document.createElement("img");
imgd.src=songlist[s_index].image;

let para = document.createElement("p");
para.innerHTML=songlist[s_index].name;
            para.addEventListener("click", function () {
                playmysong(s_index);
            });
            
div.appendChild(imgd);
div.appendChild(para);
recents.appendChild(div);

//Move to the next track if the current finishes playing 
audio.addEventListener("ended",next1()); 
}

let progress=document.getElementById("progress");



function pausePlay(){
    if(!isPlaying)
    playsong();
    else
    pausesong();
 }
 function playsong(){
    audio.play();
    isPlaying=true;
    play.className= "fa-solid fa-pause";
 }
 
 function pausesong(){
    audio.pause();
    isPlaying=false;
    play.className= "fa-solid fa-play";
 }
 
 
 
 /*to go previous song*/
 function back1(){
    if(song_index>0)
    song_index-=1;
    else
    song_index=songlist.length-1;
  
   
   audio.onloadedmetadata=function(){
   progress.max=audio.duration;
   progress.value=audio.currentTime; 
   }
   if(audio.play()){
      setInterval(()=>{
          progress.value=audio.currentTime;
      },500)}
 
      progress.onchange=function(){
         audio.play();
         audio.currentTime=progress.value;
         play.classList.add("fa-pause");
         play.classList.remove("fa-play");
      }
   
 
      playmysong(song_index); //update song
      playsong(); //update button
 
 }
 
   /*to go to next song*/
   function next1(){
   
    if(song_index<songlist.length-1)
    song_index+=1;
    else
    song_index=0;
    playmysong(song_index); //update song
    playsong();
 
   audio.onloadeddata=function(){
      progress.max=audio.duration;
      progress.value=audio.currentTime; 
   }
   if(audio.play()){
      setInterval(()=>{
          progress.value=audio.currentTime;
      },500)}
      progress.onchange=function(){
         audio.play();
         audio.currentTime=progress.value;
         play.classList.add("fa-pause");
         play.classList.remove("fa-play");
      }
   
      playmysong(song_index); //update song
      playsong(); 
    
  }


/*queue functionality*/
function addtoqueue(song_index){
myqueue[i]=song_index;
i++;
console.log(myqueue);
setmyqueue();
}
/*loop functionality*/
function loop(){
if(audio.loop==false)
{audio.loop=true;}
else if(audio.loop==true)
{audio.loop=false;}
}    
/*playlist creation*/
function remove(playlist){    
    return [...new Set(playlist)]; //remove duplicates
}
function playlist(song_index){
    myplaylist[k]=song_index;
    k++;
    console.log(myplaylist); 
    myplaylist=remove(myplaylist);
    console.log(myplaylist);
    setplaylist();
    }
    /*liked songs*/

function likedsongs(song_index){
    likes[l]=song_index;
    l++;
    console.log(likes); 
    likes=remove(likes);
    console.log(likes);
    setliked();
    }

function setplaylist(){
localStorage.setItem("myplaylist", JSON.stringify(myplaylist));
console.log(localStorage.getItem("myplaylist"));
}

function setmyqueue(){
    localStorage.setItem("myqueue", JSON.stringify(myqueue));
    console.log(localStorage.getItem("myqueue"));
    }
    
function setliked(){
    localStorage.setItem("likes", JSON.stringify(likes));
    console.log(localStorage.getItem("likes"));
    }
function clear(){
    localStorage.clear();
}